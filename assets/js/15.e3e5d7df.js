(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{430:function(t,e,a){"use strict";a.r(e);var s=a(55),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"entities-and-the-entitiyresolver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entities-and-the-entitiyresolver"}},[t._v("#")]),t._v(" Entities and the EntitiyResolver")]),t._v(" "),a("p",[t._v("Entities are hashed objects whose id is their hash. They comply with the "),a("code",[t._v("Entity")]),t._v(" interface.")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Entity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  hash"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  object"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  remote"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The object property is a canonical JSON object (stored as a JS object) whose properties are ordered alphabetically and which is then serialized using "),a("a",{attrs:{href:"https://cbor.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cbor"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("Once serialized, the hash of the bytes is obtained using a hashing algorithm and the "),a("code",[t._v("hash")]),t._v(" property is set as the "),a("a",{attrs:{href:"ipfs://bafybeidkl4t5ydt2jl5p4ltfrsi6bee36yr22d5urjxx6rr76ev3ekb3pa/anatomy-of-a-cid"}},[t._v("CID")]),t._v(" of the hash. Any valid "),a("code",[t._v("CID")]),t._v(" is a valid "),a("code",[t._v("Entity")]),t._v(" hash.")]),t._v(" "),a("p",[t._v("Entities are used by clients to store the head of each perspective, as a "),a("code",[t._v("Commit")]),t._v(" object.")]),t._v(" "),a("p",[t._v("A commit has the hash of the parent commit and that of the actual data object, both of type "),a("code",[t._v("Entity")]),t._v(". This means that the head commit of a perspective has, encoded on its hash, an immutable summary of the entire history of the perspective (all its commits) and all the associated data objects of each commit.")]),t._v(" "),a("p",[t._v("In _Prtcl, a global "),a("code",[t._v("EntityResolver")]),t._v(" class is created to resolve any entity required by any function in the application. This reduces the complexity when exploring perspectives but forces us to manually prepare the entities that need to be persisted together each Client.")]),t._v(" "),a("h2",{attrs:{id:"entity-availability-strategy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-availability-strategy"}},[t._v("#")]),t._v(" Entity availability strategy")]),t._v(" "),a("p",[t._v("Everytime a new entity is created (say a new commit is computed), this entity is included in the EntityResolver using the "),a("code",[t._v("putEntity()")]),t._v(" function.")]),t._v(" "),a("p",[t._v("Putting an entity on the "),a("code",[t._v("EntityResovler")]),t._v(" will not persisted it any "),a("code",[t._v("EntityRemote")]),t._v(". It will simply be stored in case another portion of the app needs it.")]),t._v(" "),a("p",[t._v("Entities are persisted into an "),a("code",[t._v("EntityRemote")]),t._v(", only when an "),a("code",[t._v("EveesMutation")]),t._v(" (with new perspectives or updates) is sent to a "),a("code",[t._v("ClientRemote")]),t._v(". In that case, the Entities associated to the EveesMutation are identified and persisted in the EntityRemote associated with that EveesRemote.")])])}),[],!1,null,null,null);e.default=n.exports}}]);