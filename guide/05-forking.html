<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Forking Perspectives | _Prtcl</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" type="image/png" href="/js-uprtcl/favicon.png">
    <meta name="description" content="Documentation site for the _Prtcl">
    
    <link rel="preload" href="/js-uprtcl/assets/css/0.styles.977dfdf6.css" as="style"><link rel="preload" href="/js-uprtcl/assets/js/app.97c52a5d.js" as="script"><link rel="preload" href="/js-uprtcl/assets/js/2.88174171.js" as="script"><link rel="preload" href="/js-uprtcl/assets/js/13.f2308728.js" as="script"><link rel="prefetch" href="/js-uprtcl/assets/js/10.72d2fc7b.js"><link rel="prefetch" href="/js-uprtcl/assets/js/11.e2609b95.js"><link rel="prefetch" href="/js-uprtcl/assets/js/12.47eb25ed.js"><link rel="prefetch" href="/js-uprtcl/assets/js/14.357fbdde.js"><link rel="prefetch" href="/js-uprtcl/assets/js/15.e3e5d7df.js"><link rel="prefetch" href="/js-uprtcl/assets/js/16.8d902d60.js"><link rel="prefetch" href="/js-uprtcl/assets/js/17.615d3aad.js"><link rel="prefetch" href="/js-uprtcl/assets/js/18.4b1b133a.js"><link rel="prefetch" href="/js-uprtcl/assets/js/19.30ef6807.js"><link rel="prefetch" href="/js-uprtcl/assets/js/20.041251fa.js"><link rel="prefetch" href="/js-uprtcl/assets/js/21.d9555aa0.js"><link rel="prefetch" href="/js-uprtcl/assets/js/22.69dd43e2.js"><link rel="prefetch" href="/js-uprtcl/assets/js/23.e56c9735.js"><link rel="prefetch" href="/js-uprtcl/assets/js/24.46a71a1a.js"><link rel="prefetch" href="/js-uprtcl/assets/js/3.7967c57d.js"><link rel="prefetch" href="/js-uprtcl/assets/js/4.dc4b564d.js"><link rel="prefetch" href="/js-uprtcl/assets/js/5.6b3ef29c.js"><link rel="prefetch" href="/js-uprtcl/assets/js/6.0e9fa4db.js"><link rel="prefetch" href="/js-uprtcl/assets/js/7.183495f6.js"><link rel="prefetch" href="/js-uprtcl/assets/js/8.201ff2c1.js"><link rel="prefetch" href="/js-uprtcl/assets/js/9.c5295f1c.js">
    <link rel="stylesheet" href="/js-uprtcl/assets/css/0.styles.977dfdf6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/js-uprtcl/" class="home-link router-link-active"><img src="/js-uprtcl/logo.png" alt="_Prtcl" class="logo"> <span class="site-name can-hide">_Prtcl</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/js-uprtcl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/js-uprtcl/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/js-uprtcl/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/uprtcl/js-uprtcl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/js-uprtcl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/js-uprtcl/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/js-uprtcl/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/uprtcl/js-uprtcl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/js-uprtcl/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Evees</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js-uprtcl/guide/01-core.concepts.html" class="sidebar-link">Introduction</a></li><li><a href="/js-uprtcl/guide/02-perspective-id.html" class="sidebar-link">Global Identifiers</a></li><li><a href="/js-uprtcl/guide/03-linking.html" class="sidebar-link">Linking Data</a></li><li><a href="/js-uprtcl/guide/04-querying.html" class="sidebar-link">Querying Data</a></li><li><a href="/js-uprtcl/guide/04b-querying-example.html" class="sidebar-link">Querying Example</a></li><li><a href="/js-uprtcl/guide/05-forking.html" aria-current="page" class="active sidebar-link">Forking Perspectives</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Client</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js-uprtcl/guide/06-architecture.html" class="sidebar-link">Introduction</a></li><li><a href="/js-uprtcl/guide/07-arquitectue.entities.html" class="sidebar-link">Entities and the EntitiyResolver</a></li><li><a href="/js-uprtcl/guide/08-architecture.detailed.html" class="sidebar-link">Client Interfaces</a></li><li><a href="/js-uprtcl/guide/09-arquitecture.stack.html" class="sidebar-link">Client Stack</a></li><li><a href="/js-uprtcl/guide/09b-arquitecture.stack-example.html" class="sidebar-link">Client Stack Example</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="forking-perspectives"><a href="#forking-perspectives" class="header-anchor">#</a> Forking Perspectives</h1> <p>We refer to objects in _Prtcl as &quot;perspectives&quot; and showed that they can be stored on different platforms and can be linked among them with two types of links: a generic link and a dedicated &quot;nesting&quot; link. In addition to this, we now introduce the concept of &quot;forking&quot; perspectives.</p> <p>Forking a perspective into another perspective can be done by adding a new tip to the version history of that perspective. We then refer to the virtual object made of the set of multiple tips/perspectives, as one &quot;Evee&quot;.</p> <p>One &quot;Evee&quot; can have multiple perspectives, each one of them behaving as an independent digital object, on multiple platforms and governed by different authors.</p> <p>A perspective object has one property named <code>context</code> that can be used to identify which Evee that perspective is part of. Two perspectives of the same &quot;Evee&quot; are then expected to have the same &quot;context&quot;.</p> <h2 id="forking-nested-perspectives"><a href="#forking-nested-perspectives" class="header-anchor">#</a> Forking nested perspectives</h2> <p>The data structure of perspectives in _Prtcl and GIT branches is not different at all. A git &quot;branch&quot; is an &quot;_Prtcl&quot; perspective in the sense that it is a mutable pointer to it's latest commit head, and commits are hash-chained on top of each other.</p> <p>Beside this, _Prtcl uses global identifiers (like URLs) to refer to each branch/perspective, instead of local strings, and then interprets this global branch ids as typical object URLs, not so different from other objects URLs handle by web-applications.</p> <p>The big difference comes from the fact that _Prtcl also aims at nesting these objects to build higher order ones. It's a concept similar to GIT submodules, but handled differently as _Prtcl supports adding a branch as a child of a perspective, instead of having to add a specific commit.</p> <p>This is important as, otherwise, every time a child is updated, all its parents would also need to be updated to point to the new version of the child.</p> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <h3 id="documents-as-nested-perspectives"><a href="#documents-as-nested-perspectives" class="header-anchor">#</a> Documents as nested perspectives</h3> <p>To fully clarify how nesting and recursive forking is done in _Prtcl, let's consider an example of a document made of multiple nested perspectives.</p> <p>First, we will consider the case of using GIT to store a document while trying to keep a modular version control for portions of the document.</p> <p>To this end we would have a markdown file in the root folder of the repository, and will have a new folder for each sub-section in the document, each with its own text file for the content. The folder structure in this example would be as follows:</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQtSr7otCTevpGVkJguWg2IDo4CczRQmYEC_ZS6OdGbHh_KNPzPID5B-vueENqI8meeWmrODBTlQwor/pub?w=250" alt="">.</p> <p>With this structure, each change to the document would add a new commit to the GIT repository. If a user wants to create a modification of the content of Section 1, he needs to branch the entire repository, updating the GIT repository database in the root folder, and then change the contents of that section's file.</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vS-BgtufemXRCTg1MynAH21eW7CikTG6XsIVB8IM88kLDeU-EkFoSiU4npBd7M56BxpVx0RM5U6il1P/pub?w=800" alt=""></p> <p>Now, let's consider the case of the _Prtcl. In this case each element of the document would be a perspective of an Evee and there would be six perspectives building the entire document:</p> <ul><li>The document itself would be an Evee let's call it <code>DOC1</code> with content “Document 1”,</li> <li>Three children Evees of <code>DOC1</code>: The first paragraph and the two subsections.</li> <li>Each of these subsections would then have a child evee with their corresponding content.</li></ul> <p>The figures below show these six Evees and their links as children. The figure also shows how the new perspective of the content of Section 1 (<code>SIT</code>) is a perspective/branch of that Evee only, and not of the entire document.</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vTytsM_uOnHrOPpSUMQ9VjuItYGCrWX3p17J8OAFc0i51Bq1ZdfCZSdhIsgS7sKuQ-P1Wi_WYmRLvq8/pub?w=800" alt="">.</p> <p>Mapping these perspectives into the different portions of the document would look like this:</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQKV_90TD_nKZIPFrxUHKDUMB5j1qvaFBEBDw8vay37IN2HQx3rTeBh3HRGI1Oz06pfr_Yti-I6pqst/pub?w=800" alt=""></p> <p>With _Prtcl, it is now possible for the new perspective on the <code>SIT</code> Evee to be reused on another document, say, for example, <code>DOC2</code>, without losing the link to its version within the <code>DOC1</code> context.</p> <p>This link can be, eventually, used to bring back changes in <code>SIT</code> made in <code>DOC2</code> back into <code>DOC1</code>, and it would had been lost if <code>DOC2</code> were being created as a new GIT repository that &quot;reuses&quot; that same <code>Sit ei.txt</code> file.</p> <p>Note that, with _Prtcl, the same perspective of an Evee, say a paragraph or an entire section, can live in two different parent Evees at the same time.</p> <p>In the figure below, the mutation perspective of the <code>SIT</code> context is reused in another context <code>DOC2</code> without losing the link with the original document. The figure shows two interconnected “ecosystems” of <code>DOC1</code> and <code>DOC2</code>.</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vRW7JfqrlS4a2_6jsoArQHjoV4euRXbIkpVzjtDzGJnbGx_4AiNkDK62ZebZqKNbdLVNMVPjN3JnpHr/pub?w=800" alt=""></p> <p>And the &quot;document&quot; representation of these two set of Evees would look like this:</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vTLs2fJ8ozbP4VPKa-SlCScOfzvHXyX7Hm1ayU7Eo0C_ZcUbGBIwgoUNd--Am9RZt3Lghtp8SzHSk9s/pub?w=800" alt=""></p> <h3 id="forking-an-ecosystem"><a href="#forking-an-ecosystem" class="header-anchor">#</a> Forking an ecosystem</h3> <p>Creating a new perspective of an Evee by forking one of its perspectives is down as follows:</p> <ol><li><p>Create a new perspective that points to the head (last) commit of the current perspective of that Evee.</p></li> <li><p>Create a new perspective on each of the children perspective and point them to the head (last) commit of their current perspective.</p></li> <li><p>Add a commit to the parent perspective updating the links to its children so that they point to newly created perspectives of the children.</p></li> <li><p>Recurse, from steps 2 on the children perspectives.</p></li></ol> <h3 id="forking-an-ecosystem-example"><a href="#forking-an-ecosystem-example" class="header-anchor">#</a> Forking an ecosystem - Example</h3> <p>An example of a case where <code>DOC1</code> ecosystem is recursively forked is recursively forked is below. Blue tags are the ids of the current perspectives for each Evee and point to their corresponding head commit (blue circles). The global perspective operation creates a new perspective on <code>DOC1</code> (with new ids in yellow tags) and all of its children and adds a commit (yellow circles) to perspectives with children (<code>DOC1</code>, <code>S1</code> and <code>S2</code> ), to update their children links to point to the newly created perspectives of their children.</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vRP-Sjd09ucb_zFrkjPYMyWbFVaOBQHmHSHhQ7mTtQBobbenb5QPl23ZptTjatVeg9vv6BciIxt-JNK/pub?w=800" alt=""></p> <p>The visualization of a new global perspective of DOC1. The content remains the same although new perspectives and links among them have been created.</p> <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vRj5HqrUcysPXTVKHJBxhomOCf_m8X45AVjy3knfToFRd7uO2H4eDnt2xSQdD8zmsjY6vCNQJxOI-Fr/pub?w=800" alt=""></p> <h3 id="merging-two-ecosystems"><a href="#merging-two-ecosystems" class="header-anchor">#</a> Merging two ecosystems</h3> <p>The connections between different perspectives through their children links is used when doing merges, which, as is the case for new perspectives, are different in _Prtcl than in GIT.</p> <p>The following is the process to globally merge two perspectives, conceptually we want to merge perspective B (yellow tags) into perspective A (blue tags), of the same Evee by adding a new commit into perspective A:</p> <p>If the data in perspective B has been modified and data in perspective A have not, then data in perspective A will now point to the same data object of perspective B. If, on the other hand, data has been modified in perspective A, try to merge both data sets using custom merging functions (see below).</p> <p>For each children perspective in perspective B:</p> <ul><li><p>Check if there is a children link to a perspective of that same Evee in perspective A.</p></li> <li><p>If there is such a link, then merge those two perspectives of the recursing this same algorithm and leave the link of perspective A untouched.</p></li> <li><p>If there is not such a link, then this is a new perspective. Create a new fork of the child of perspective B and add a link on perspective A to that new fork.</p></li> <li><p>Remove children links in perspective A which are not found on perspective B.</p></li></ul> <blockquote><p>Note: This should be improved. The final code includes a couple of additional details.</p></blockquote> <h2 id="how-to-use-multiple-perspectives-of-one-evee"><a href="#how-to-use-multiple-perspectives-of-one-evee" class="header-anchor">#</a> How to use multiple perspectives of one Evee</h2> <p>Evees are exposed to _Prtcl applications through the standard querying process. This is, while querying for perspectives, it is possible to explicitely request/includes the forks of a perspective as part of the results.</p> <p>Once different perspectives of the same Evee have been found, they can be compared (recursively to compare their children too) and can be merged, bringing the changes made on of them back into the other.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js-uprtcl/guide/04b-querying-example.html" class="prev">
        Querying Example
      </a></span> <span class="next"><a href="/js-uprtcl/guide/06-architecture.html">
        Introduction
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/js-uprtcl/assets/js/app.97c52a5d.js" defer></script><script src="/js-uprtcl/assets/js/2.88174171.js" defer></script><script src="/js-uprtcl/assets/js/13.f2308728.js" defer></script>
  </body>
</html>
